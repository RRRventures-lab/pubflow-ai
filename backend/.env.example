# ============================================================================
# PubFlow AI Backend - Environment Configuration
# Copy this file to .env and configure for your environment
# ============================================================================

# --------------------------------------------------------------------------
# Server Configuration
# --------------------------------------------------------------------------
NODE_ENV=development
PORT=3001
HOST=0.0.0.0
LOG_LEVEL=debug

# API Version
API_VERSION=v1

# --------------------------------------------------------------------------
# Database (PostgreSQL with pgvector)
# --------------------------------------------------------------------------
DB_HOST=localhost
DB_PORT=5432
DB_NAME=pubflow
DB_USER=pubflow
DB_PASSWORD=your_secure_password_here

# Connection Pool Settings
DB_POOL_MIN=2
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=30000

# Full connection URL (alternative to individual settings)
# DATABASE_URL=postgresql://pubflow:password@localhost:5432/pubflow

# --------------------------------------------------------------------------
# Redis (Caching & Job Queues)
# --------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0

# Cache TTL (seconds)
CACHE_TTL=3600
EMBEDDING_CACHE_TTL=86400

# --------------------------------------------------------------------------
# JWT Authentication
# --------------------------------------------------------------------------
JWT_SECRET=your_super_secret_jwt_key_change_this_in_production_32_chars
JWT_REFRESH_SECRET=your_refresh_secret_key_also_change_this_32_chars
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d

# --------------------------------------------------------------------------
# CORS Configuration
# --------------------------------------------------------------------------
CORS_ORIGIN=http://localhost:3000
CORS_CREDENTIALS=true

# --------------------------------------------------------------------------
# OpenAI Configuration (AI Agents)
# --------------------------------------------------------------------------
OPENAI_API_KEY=sk-your-openai-api-key
OPENAI_ORGANIZATION=

# Models
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_EMBEDDING_DIMENSIONS=1536

# Rate Limits (requests per minute)
OPENAI_RPM=500
OPENAI_TPM=200000

# --------------------------------------------------------------------------
# AI Worker Configuration
# --------------------------------------------------------------------------
WORKER_ENABLED=true
WORKER_CONCURRENCY=3
WORKER_POLL_INTERVAL=5000
WORKER_RETRY_ATTEMPTS=3
WORKER_RETRY_DELAY=5000
WORKER_TASK_TIMEOUT=60000

# --------------------------------------------------------------------------
# Rate Limiting
# --------------------------------------------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_REQUESTS_PER_HOUR=1000
RATE_LIMIT_AI_REQUESTS_PER_MINUTE=20
RATE_LIMIT_AI_REQUESTS_PER_HOUR=200
RATE_LIMIT_BURST_SIZE=10

# --------------------------------------------------------------------------
# File Upload
# --------------------------------------------------------------------------
UPLOAD_MAX_FILE_SIZE=104857600
UPLOAD_TEMP_DIR=/tmp/pubflow-uploads
UPLOAD_ALLOWED_TYPES=csv,xlsx,xls,txt,edi

# --------------------------------------------------------------------------
# CWR Configuration
# --------------------------------------------------------------------------
CWR_DEFAULT_VERSION=2.1
CWR_SENDER_ID=
CWR_SENDER_NAME=
CWR_SENDER_TYPE=PB

# --------------------------------------------------------------------------
# External API Keys (Optional)
# --------------------------------------------------------------------------
# MusicBrainz
MUSICBRAINZ_USER_AGENT=PubFlowAI/1.0

# Discogs
DISCOGS_API_KEY=
DISCOGS_API_SECRET=

# PRO APIs (for enrichment)
ASCAP_API_KEY=
BMI_API_KEY=

# --------------------------------------------------------------------------
# Monitoring & Observability
# --------------------------------------------------------------------------
# Sentry Error Tracking
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# Metrics
METRICS_ENABLED=true
METRICS_PORT=9090

# --------------------------------------------------------------------------
# Email Configuration (Optional)
# --------------------------------------------------------------------------
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@pubflow.ai

# --------------------------------------------------------------------------
# Feature Flags
# --------------------------------------------------------------------------
FEATURE_AI_ENRICHMENT=true
FEATURE_AI_MATCHING=true
FEATURE_AI_CONFLICTS=true
FEATURE_WEBSOCKET=true
FEATURE_MULTI_TENANT=true

# --------------------------------------------------------------------------
# Security
# --------------------------------------------------------------------------
# Session
SESSION_SECRET=your_session_secret_here

# API Key for external integrations
API_KEY_SALT=random_salt_for_api_keys

# Encryption key for sensitive data (32 bytes, base64 encoded)
ENCRYPTION_KEY=

# --------------------------------------------------------------------------
# Tenant Configuration
# --------------------------------------------------------------------------
DEFAULT_TENANT_PLAN=basic
MAX_WORKS_PER_TENANT_FREE=1000
MAX_WORKS_PER_TENANT_BASIC=10000
MAX_WORKS_PER_TENANT_PRO=100000
MAX_WORKS_PER_TENANT_ENTERPRISE=unlimited
